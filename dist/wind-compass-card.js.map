{"version":3,"file":"wind-compass-card.js","sources":["../src/wind-compass-card.ts"],"sourcesContent":[null],"names":["console","info","WindCompassCard","HTMLElement","constructor","this","_bucketSize","_bucketCount","_warnMultiplier","_historyData","_lastHistoryFetch","_currentUnit","_maxSpeed","_currentGust","getConfigElement","document","createElement","getStubConfig","type","direction_entity","speed_entity","hass","_hass","_updateCard","setConfig","config","Error","connectedCallback","shadowRoot","attachShadow","mode","_render","_resizeObserver","ResizeObserver","_updateLayout","observe","disconnectedCallback","disconnect","innerHTML","dirEntity","speedEntity","entityGust","gust_entity","maxSpeed","max_speed","dirState","states","speedState","gustState","_avgDeg","parseFloat","state","_instDeg","_currentSpeed","attributes","unit_of_measurement","now","Date","_fetchHistory","_updateDisplay","endTime","startTime","getTime","entities","join","history","callApi","toISOString","length","dirHist","find","arr","entity_id","speedHist","_processHistoryData","e","error","dirData","speedData","buckets","Array","fill","map","duration","totalSpeed","speedIdx","i","deg","isNaN","startTs","last_changed","durationMin","speedVal","bucketIndex","Math","floor","container","querySelector","width","offsetWidth","_pxPerDeg","_buildTape","tape","forEach","b","avg","slotWidth","barWidth","max","pxPos","normalizedDeg","data","avgSpeed","heightPct","bar","className","style","left","height","background","appendChild","tick","opacity","label","directions","textContent","top","undefined","transform","speedValue","speedUnit","gustInfo","speedBar","maxLabel","round","toString","pct","min","getCardSize","customElements","define","window","customCards","push","name","preview","description"],"mappings":"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"}