{"version":3,"file":"wind-compass-card.js","sources":["../src/wind-compass-card.ts"],"sourcesContent":[null],"names":["console","info","WindCompassCard","HTMLElement","constructor","this","_bucketSize","_bucketCount","_historyData","_lastHistoryFetch","_currentUnit","_maxSpeed","_currentGust","getConfigElement","document","createElement","getStubConfig","type","direction_entity","speed_entity","hass","_hass","_updateCard","setConfig","config","Error","connectedCallback","shadowRoot","attachShadow","mode","_render","_resizeObserver","ResizeObserver","_updateLayout","observe","disconnectedCallback","disconnect","innerHTML","dirEntity","speedEntity","entityGust","gust_entity","maxSpeed","max_speed","dirState","states","speedState","gustState","_avgDeg","parseFloat","state","_currentSpeed","attributes","unit_of_measurement","now","Date","_fetchHistory","_updateDisplay","endTime","startTime","getTime","entities","join","history","callApi","toISOString","length","dirHist","find","arr","entity_id","speedHist","_processHistoryData","e","error","dirData","speedData","buckets","Array","fill","map","duration","totalSpeed","speedIdx","i","deg","isNaN","startTs","last_changed","durationMin","speedVal","bucketIndex","Math","floor","container","querySelector","width","offsetWidth","_pxPerDeg","_buildTape","tape","forEach","b","avg","slotWidth","barWidth","max","pxPos","normalizedDeg","data","avgSpeed","heightPct","bar","className","style","left","height","background","appendChild","tick","opacity","label","directions","textContent","top","undefined","transform","speedValue","speedUnit","gustInfo","speedBar","maxLabel","round","toString","pct","min","getCardSize","customElements","define","window","customCards","push","name","preview","description"],"mappings":"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"}